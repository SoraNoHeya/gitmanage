实验
===

办文管理
---

### 用例图

![办文管理](办文管理.PNG)

### 用例规约

| 用例名称   | 分发文书                                     |
| ------ | ---------------------------------------- |
| 参与者    | 分发部门、局领导                                 |
| 用例简述   | 该用例规定了局领导向下分发机关文书给分发部门                   |
| 前置条件   | 局领导需要分发机关文书                              |
| 后置条件   | 分发部门获得局领导分发的机关文书                         |
| 基本事件流  | 1. 局领导向下分发机关文书给具体部门<br />2. 分发部门获得局领导分发的机关文书<br />3. 此用例成功结束 |
| 备选事件流  | 无                                        |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条请求         |

| 用例名称   | 向上请示局领导                                  |
| ------ | ---------------------------------------- |
| 参与者    | 分发部门、局领导                                 |
| 用例简述   | 该用例规定了分发部门向上请示局领导                        |
| 前置条件   | 分发部门需要向上请示局领导                            |
| 后置条件   | 局领导获取分发部门的请求                             |
| 基本事件流  | 1. 分发部门向上请示局领导<br />2. 局领导获取分发部门的请求<br />3. 此用例成功结束 |
| 备选事件流  | 无                                        |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条请求         |

| 用例名称   | 协调承办部门                                   |
| ------ | ---------------------------------------- |
| 参与者    | 分发部门、承办部门领导                              |
| 用例简述   | 该用例规定了分发部门协调承办部门领导                       |
| 前置条件   | 分发部门需要协调承办部门领导                           |
| 后置条件   | 承办部门领导获取分发部门的协调请求                        |
| 基本事件流  | 1. 分发部门协调承办部门领导<br />2. 承办部门领导获取分发部门的协调请求<br />3. 此用例成功结束 |
| 备选事件流  | 无                                        |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条请求         |

| 用例名称   | 协调分发部门                                   |
| ------ | ---------------------------------------- |
| 参与者    | 分发部门、承办部门领导                              |
| 用例简述   | 该用例规定了承办部门领导协调分发部门                       |
| 前置条件   | 承办部门领导需要协调分发部门                           |
| 后置条件   | 分发部门获取承办部门领导的请求                          |
| 基本事件流  | 1. 承办部门领导协调分发部门<br />2. 分发部门获取承办部门领导的协调请求<br />3. 此用例成功结束 |
| 备选事件流  | 无                                        |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条请求         |

| 用例名称   | 指导人员                                     |
| ------ | ---------------------------------------- |
| 参与者    | 承办部门领导、承办部门人员                            |
| 用例简述   | 该用例规定了承办部门领导向下指导承办部门人员                   |
| 前置条件   | 承办部门领导需要向下指导承办部门人员                       |
| 后置条件   | 指导承办部门人员获得承办部门领导的领导                      |
| 基本事件流  | 1. 承办部门领导向下指导承办部门人员<br />2. 指导承办部门人员获得承办部门领导的领导<br />3. 此用例成功结束 |
| 备选事件流  | 无                                        |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条请求         |

| 用例名称   | 向上请示部门领导                                 |
| ------ | ---------------------------------------- |
| 参与者    | 承办部门人员、承办部门领导                            |
| 用例简述   | 该用例规定了承办部门人员向上请示承办部门领导                   |
| 前置条件   | 承办部门人员需要向上请示承办部门领导                       |
| 后置条件   | 承办部门领导获取承办部门人员的请求                        |
| 基本事件流  | 1. 承办部门人员向上请示承办部门领导<br />2. 承办部门领导获取承办部门人员的请求<br />3. 此用例成功结束 |
| 备选事件流  | 无                                        |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条请求         |

### 服务描述

本系统的每位用户

### 接口设计

* 发送办文请求

  * sendUid
    * 发送方用户所使用的id
  * receiveUid
    * 接收方用户所请求的操作
  * content
    * 发送的请求具体公文信息

  ```http
  POST /office/request HTTP/1.1
  Content-Type: application/vnd.api+json
  Accept: application/vnd.api+json

  {
    "sendUid": ${uid},
    "receiveUid": ${pid},
    "content": ${content}
  }
  ```

  * state
    * 发送成功时返回0，失败时为1
  * msg
    * 发送成功或失败的描述

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/vnd.api+json

  {
    "state": 1,
    "msg": "No permission."
  }
  ```


权限管理
---

### 用例图

![权限管理](权限管理.PNG)

### 用例规约

| 用例名称   | 判断权限是否满足                                 |
| ------ | ---------------------------------------- |
| 参与者    | 任意用户                                     |
| 用例简述   | 该用例规定了用户判断是否有相应的权限完成某项操作                 |
| 前置条件   | 当任意用户发出某项操作时，系统会自动调用权限管理服务，判断权限是否满足      |
| 后置条件   | 若权限满足，则执行相应的服务，否则，返回权限错误提示               |
| 基本事件流  | 1. 用户发出人已请求<br />2. 系统自动将请求拦截，并使用权限管理服务的权限判断<br />3. 权限管理服务再将请求的信息发向其他目标服务<br />4. 此用例成功结束 |
| 备选事件流  | 1. 如果在基本事件流步骤 2 中权限判断不满足<br />1.1 返回错误提示，并抛弃这次请求<br />1.2 此用户失败结束 |
| 发生频率   | 每次用户提交一项请求，都会进行权限判断                      |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条权限判断请求     |

| 用例名称   | 分配权限                                     |
| ------ | ---------------------------------------- |
| 参与者    | 权限管理员、被分配权限的用户                           |
| 用例简述   | 该用例规定了权限管理员对其他用户进行响应权限的分配，让其他用户拥有某项操作的权限 |
| 前置条件   | 分配管理员需要有分配权限的权限                          |
| 后置条件   | 被分配权限的用户获得某项操作的权限                        |
| 基本事件流  | 1. 权限管理员发起为某用户分配权限的请求<br />2. 被分配权限的用户获得某项操作的权限<br />3. 此用例成功结束 |
| 备选事件流  | 1. 如果在基本事件流步骤 2 中被分配权限的用户已有响应权限<br />1.1 直接返回，不需要再进行分配操作 |
| 发生频率   | 每次用户权限管理员对其他用户进行响应权限的分配，都会进行权限分配         |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条权限分配请求     |

### 服务描述

本系统的每位用户

### 接口设计

* 判权请求

  * uid
    * 用户所使用的id
  * action
    * 用户所请求的操作

  ```http
  GET /auth?token=${uid}&action=${action} HTTP/1.1
  ```

  * state
    * 授权成功该接口不返回，失败时为1
  * msg
    * 授权失败的描述

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/vnd.api+json

  {
    "state": 1,
    "msg": "No permission."
  }
  ```

* 分配请求

  * uid
    * 用户所使用的id
  * permissionId
    * 授权用户所请求的权限id
  * permission
    * 授权的具体权限

  ```http
  PATCH /auth HTTP/1.1
  Content-Type: application/vnd.api+json
  Accept: application/vnd.api+json

  {
    "uid": ${uid},
    "permissionId": ${pid},
    "permission": ${permission}
  }
  ```

  * state
    * 授权成功时返回0，失败时为1
  * msg
    * 授权成功或失败的描述

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/vnd.api+json

  {
    "state": 0,
    "msg": "Success"
  }
  ```

  ​