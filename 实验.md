# 实验

## 权限管理

### 用例图

![权限管理](权限管理.PNG)

### 用例规约

| 用例名称   | 判断权限是否满足                                 |
| ------ | ---------------------------------------- |
| 参与者    | 任意用户                                     |
| 用例简述   | 该用例规定了用户判断是否有相应的权限完成某项操作                 |
| 前置条件   | 当任意用户发出某项操作时，系统会自动调用权限管理服务，判断权限是否满足      |
| 后置条件   | 若权限满足，则执行相应的服务，否则，返回权限错误提示               |
| 基本事件流  | 1. 用户发出人已请求<br />2. 系统自动将请求拦截，并使用权限管理服务的权限判断<br />3. 权限管理服务再将请求的信息发向其他目标服务<br />4. 此用例成功结束 |
| 备选事件流  | 1. 如果在基本事件流步骤 2 中权限判断不满足<br />1.1 返回错误提示，并抛弃这次请求<br />1.2 此用户成功结束 |
| 发生频率   | 每次用户提交一项请求，都会进行权限判断                      |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条权限判断请求     |

| 用例名称   | 分配权限                                     |
| ------ | ---------------------------------------- |
| 参与者    | 权限管理员、被分配权限的用户                           |
| 用例简述   | 该用例规定了权限管理员对其他用户进行响应权限的分配，让其他用户拥有某项操作的权限 |
| 前置条件   | 分配管理员需要有分配权限的权限                          |
| 后置条件   | 被分配权限的用户获得某项操作的权限                        |
| 基本事件流  | 1. 权限管理员发起为某用户分配权限的请求<br />2. 被分配权限的用户获得某项操作的权限<br /> |
| 备选事件流  | 1. 如果在基本事件流步骤 2 中被分配权限的用户已有响应权限<br />1.1 直接返回，不需要再进行分配操作 |
| 发生频率   | 每次用户权限管理员对其他用户进行响应权限的分配，都会进行权限分配         |
| 非功能性需求 | 1. 有强大的高并发处理能力，每秒至少能处理 10000 条权限分配请求     |

### 服务描述

本系统的每位用户

### 接口设计

+ 判权请求

  + userid
    + 用户所使用的id
  + action
    + 用户所请求的操作

   ```http
  GET /auth?token=${userid}&action=${action} HTTP/1.1
   ```

  + state
    + 授权成功该接口不返回，失败时为1
  + msg
    + 授权失败的描述

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/vnd.api+json

  {
    "state": 1,
    "msg": "No permission."
  }
  ```

